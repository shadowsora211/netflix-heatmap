(function(t){function e(e){for(var n,s,o=e[0],l=e[1],u=e[2],p=0,f=[];p<o.length;p++)s=o[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&f.push(r[s][0]),r[s]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(t[n]=l[n]);c&&c(e);while(f.length)f.shift()();return i.push.apply(i,u||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],n=!0,o=1;o<a.length;o++){var l=a[o];0!==r[l]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=a[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var a=n[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=n,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(a,n,function(e){return t[e]}.bind(null,n));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/netflix-heatmap/";var o=window["webpackJsonp"]=window["webpackJsonp"]||[],l=o.push.bind(o);o.push=e,o=o.slice();for(var u=0;u<o.length;u++)e(o[u]);var c=l;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"2f4a":function(t,e,a){t.exports=a.p+"img/netflixScreenshot.cd3a427e.jpg"},"51ce":function(t,e,a){"use strict";a("ccfd")},"56d7":function(t,e,a){"use strict";a.r(e);a("e260"),a("e6cf"),a("cca6"),a("a79d");var n=a("2b0e"),r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-app",[a("v-app-bar",{attrs:{app:"",color:"primary",dark:""}},[a("div",{staticClass:"d-flex align-center"},[a("h2",[t._v("Netflix Heatmap")])]),a("v-spacer")],1),a("v-main",[a("Home")],1)],1)},i=[],s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-container",[n("v-row",{attrs:{justify:"center"}},[n("v-col",{attrs:{cols:"12"}},[t._v(" Upload a viewing history CSV "),n("a",{attrs:{href:"https://www.netflix.com/settings/viewed/",target:"_blank",rel:"noopener noreferrer"}},[t._v("from Netflix")]),n("div",{on:{drop:function(e){return e.preventDefault(),t.addDropFile(e)},dragover:function(t){t.preventDefault()}}},[n("v-file-input",{attrs:{accept:".csv",label:"Click or drop file here"},model:{value:t.filename,callback:function(e){t.filename=e},expression:"filename"}})],1),n("v-btn",{attrs:{color:"primary",disabled:!t.filename},on:{click:t.parseFile}},[t._v("Upload")])],1)],1),t.historyMap?t._e():n("v-row",{attrs:{justify:"center"}},[n("v-img",{attrs:{src:a("2f4a"),"max-width":"800"}})],1),t.historyMap?n("v-row",{attrs:{justify:"center"}},[n("h2",[t._v(t._s(t.currYear))]),n("calendar-heatmap",{attrs:{values:t.dailyCounts,"end-date":t.maxDate,"tooltip-unit":t.unit,max:t.settings.maxDays},on:{"day-click":t.dayClick}})],1):t._e(),t.historyMap?n("v-row",{attrs:{justify:"center"}},[n("v-btn",{on:{click:function(e){t.currYear-=1}}},[t._v("Prev Year")]),n("v-btn",{attrs:{disabled:t.nextYearDisabled},on:{click:function(e){t.currYear+=1}}},[t._v("Next Year")])],1):t._e(),n("br"),n("br"),t.historyMap?n("v-row",{attrs:{align:"center",justify:"center"}},[n("div",[n("span",{staticClass:"stats"},[t._v("Daily average: "),n("span",{staticClass:"units"},[t._v(t._s(t.dailyAverage.toFixed(1))+" "+t._s(t.unit))])]),n("span",{staticClass:"stats"},[t._v("Longest streak: "),n("span",{staticClass:"units"},[t._v(t._s(t.longestStreak)+" days")])]),n("span",{staticClass:"stats"},[t._v("Current streak: "),n("span",{staticClass:"units"},[t._v(t._s(t.currentStreak)+" days")])])])]):t._e(),n("br"),n("br"),n("v-row",[t.dayList?n("v-col",{attrs:{align:"center",justify:"center"}},[n("h2",[t._v(t._s(t.currDay))]),n("v-list",t._l(t.dayList,(function(e){return n("v-list-item",{key:e},[t._v(t._s(e))])})),1)],1):t._e(),t.historyMap?n("v-col",{attrs:{align:"center",justify:"center"}},[n("h2",[t._v("Settings")]),n("br"),n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-text-field",{staticClass:"inputbox",attrs:{label:"Max colour threshold",type:"number",clearable:""},model:{value:t.input.maxDays,callback:function(e){t.$set(t.input,"maxDays",e)},expression:"input.maxDays"}})],1),n("v-row",{attrs:{align:"center",justify:"center"}},[n("v-text-field",{staticClass:"inputbox",attrs:{label:"Daily average start",type:"date",clearable:""},model:{value:t.input.minAvgDate,callback:function(e){t.$set(t.input,"minAvgDate",e)},expression:"input.minAvgDate"}})],1),n("v-btn",{on:{click:t.updateSettings}},[t._v("Update")])],1):t._e()],1)],1)},o=[];a("ac1f"),a("1276"),a("fb6a"),a("b64b"),a("4de4"),a("d81d"),a("159b"),a("4d63"),a("25f0"),a("5319");function l(t,e,a){var n=new FileReader;n.onload=function(){var t=n.result,r=u(t);if("Title"==r[0][0]&&"Date"==r[0][1])e(r);else{var i="File in the wrong format";a(i)}},n.readAsText(t)}function u(t){var e=new RegExp('(\\,|\\r?\\n|\\r|^)(?:"([^"]*(?:""[^"]*)*)"|([^\\,\\r\\n]*))',"gi"),a=null,n=[[]];while(null!==(a=e.exec(t)))a[1].length&&","!==a[1]&&n.push([]),n[n.length-1].push(a[2]?a[2].replace(new RegExp('""',"g"),'"'):a[3]);return n}var c={name:"Home",data:function(){return{filename:null,historyMap:null,currYear:null,unit:"titles",settings:{maxDays:null,minAvgDate:null},input:{maxDays:null,minAvgDate:null},dayList:null,currDay:null}},mounted:function(){localStorage.historyMap&&(this.historyMap=JSON.parse(localStorage.historyMap)),localStorage.settings&&(this.settings=JSON.parse(localStorage.settings),this.input=JSON.parse(localStorage.settings)),this.currYear=this.getCurrYear()},methods:{parseFile:function(){var t=this;l(this.filename,(function(e){t.filedata=e,t.$toast.success("File uploaded!");for(var a={},n=1;n<e.length;n++){var r=e[n][1],i=e[n][0];r&&(a[r]||(a[r]=[]),a[r].push(i))}t.historyMap=a,localStorage.historyMap=JSON.stringify(t.historyMap)}),(function(e){t.$toast.error(e)}))},formatDate:function(t){var e=t.split("/");return e[2]+"-"+e[1]+"-"+e[0]},getCurrYear:function(){var t=new Date;return t.getFullYear()},updateSettings:function(){this.settings.maxDays=parseInt(this.input.maxDays),this.settings.minAvgDate=this.input.minAvgDate,localStorage.settings=JSON.stringify(this.settings),this.$toast.success("Settings updated!")},addDropFile:function(t){this.filename=t.dataTransfer.files[0]},dayClick:function(t){var e=("0"+t.date.getDate()).slice(-2)+"/"+("0"+(t.date.getMonth()+1)).slice(-2)+"/"+t.date.getFullYear();this.dayList=this.historyMap[e],this.currDay=e}},computed:{dailyCounts:function(){if(!this.historyMap)return null;for(var t=[],e=Object.keys(this.historyMap),a=0;a<e.length;a++)t.push({date:this.formatDate(e[a]),count:this.historyMap[e[a]].length});return t},maxDate:function(){return this.currYear+"-12-31"},nextYearDisabled:function(){return this.currYear==this.getCurrYear()},dailyAverage:function(){var t=this,e=this.settings.minAvgDate?this.dailyCounts.filter((function(e){return new Date(e.date)>new Date(t.settings.minAvgDate)})):this.dailyCounts,a=e.map((function(t){return t.count})).reduce((function(t,e){return t+e}),0);return a/e.length||0},currentStreak:function(){var t=0;return this.dailyCounts.forEach((function(e,a){(new Date).setUTCHours(0,0,0,0)-new Date(e.date).setUTCHours(0,0,0,0)===864e5*a&&t++})),t>0||this.dailyCounts.forEach((function(e,a){(new Date).setUTCHours(0,0,0,0)-new Date(e.date).setUTCHours(0,0,0,0)===864e5*(a+1)&&t++})),t},longestStreak:function(){var t=0,e=0,a=new Date(this.dailyCounts[0].date).setUTCHours(0,0,0,0),n=0;return this.dailyCounts.forEach((function(r,i){a-new Date(r.date).setUTCHours(0,0,0,0)===864e5*(i-n)?t++:(t>e&&(e=t),t=1,a=new Date(r.date).setUTCHours(0,0,0,0),n=i)})),e}}},p=c,f=(a("51ce"),a("2877")),d=a("6544"),v=a.n(d),h=a("8336"),g=a("62ad"),y=a("a523"),m=a("23a7"),b=a("adda"),x=a("8860"),D=a("da13"),w=a("0fd9"),_=a("8654"),C=Object(f["a"])(p,s,o,!1,null,"01aefaa8",null),S=C.exports;v()(C,{VBtn:h["a"],VCol:g["a"],VContainer:y["a"],VFileInput:m["a"],VImg:b["a"],VList:x["a"],VListItem:D["a"],VRow:w["a"],VTextField:_["a"]});var k={name:"App",components:{Home:S},data:function(){return{}}},M=k,j=a("7496"),O=a("40dc"),Y=a("f6c4"),A=a("2fa4"),T=Object(f["a"])(M,r,i,!1,null,null,null),V=T.exports;v()(T,{VApp:j["a"],VAppBar:O["a"],VMain:Y["a"],VSpacer:A["a"]});var F=a("f309");n["a"].use(F["a"]);var H=new F["a"]({theme:{options:{customProperties:!0}}}),U=a("b079"),P=a.n(U),N=(a("4238"),a("56b4")),$=a.n(N);a("dfd8");n["a"].config.productionTip=!1,n["a"].use(P.a),n["a"].use($.a),new n["a"]({vuetify:H,render:function(t){return t(V)}}).$mount("#app")},ccfd:function(t,e,a){}});
//# sourceMappingURL=app.21dbd81d.js.map